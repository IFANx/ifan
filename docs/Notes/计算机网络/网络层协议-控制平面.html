<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>网络层协议-控制平面 | Notes</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="办法总比问题多">
    
    <link rel="preload" href="/ifan/assets/css/0.styles.9066d5db.css" as="style"><link rel="preload" href="/ifan/assets/js/app.8404088c.js" as="script"><link rel="preload" href="/ifan/assets/js/2.733019b2.js" as="script"><link rel="preload" href="/ifan/assets/js/96.6311231f.js" as="script"><link rel="prefetch" href="/ifan/assets/js/10.79d5a438.js"><link rel="prefetch" href="/ifan/assets/js/100.16b68609.js"><link rel="prefetch" href="/ifan/assets/js/101.ee6fb75d.js"><link rel="prefetch" href="/ifan/assets/js/102.72f27379.js"><link rel="prefetch" href="/ifan/assets/js/11.b481b7e3.js"><link rel="prefetch" href="/ifan/assets/js/12.64333ff2.js"><link rel="prefetch" href="/ifan/assets/js/13.d6c3ca02.js"><link rel="prefetch" href="/ifan/assets/js/14.390935c0.js"><link rel="prefetch" href="/ifan/assets/js/15.c7bf4d4f.js"><link rel="prefetch" href="/ifan/assets/js/16.545e7617.js"><link rel="prefetch" href="/ifan/assets/js/17.52b247ff.js"><link rel="prefetch" href="/ifan/assets/js/18.1a940620.js"><link rel="prefetch" href="/ifan/assets/js/19.d31a21e7.js"><link rel="prefetch" href="/ifan/assets/js/20.0e57ebcb.js"><link rel="prefetch" href="/ifan/assets/js/21.e4d3eb9f.js"><link rel="prefetch" href="/ifan/assets/js/22.33e351df.js"><link rel="prefetch" href="/ifan/assets/js/23.b5f26c5f.js"><link rel="prefetch" href="/ifan/assets/js/24.25c61120.js"><link rel="prefetch" href="/ifan/assets/js/25.b220adeb.js"><link rel="prefetch" href="/ifan/assets/js/26.90259e3b.js"><link rel="prefetch" href="/ifan/assets/js/27.3e698f68.js"><link rel="prefetch" href="/ifan/assets/js/28.989a3a4f.js"><link rel="prefetch" href="/ifan/assets/js/29.157d2558.js"><link rel="prefetch" href="/ifan/assets/js/3.abc0fc7e.js"><link rel="prefetch" href="/ifan/assets/js/30.5a0fe6f3.js"><link rel="prefetch" href="/ifan/assets/js/31.21730518.js"><link rel="prefetch" href="/ifan/assets/js/32.2a685d63.js"><link rel="prefetch" href="/ifan/assets/js/33.f7d48de2.js"><link rel="prefetch" href="/ifan/assets/js/34.2a08eef0.js"><link rel="prefetch" href="/ifan/assets/js/35.49883a6b.js"><link rel="prefetch" href="/ifan/assets/js/36.5cdf7c9c.js"><link rel="prefetch" href="/ifan/assets/js/37.92b7c857.js"><link rel="prefetch" href="/ifan/assets/js/38.de0727c0.js"><link rel="prefetch" href="/ifan/assets/js/39.07a490c1.js"><link rel="prefetch" href="/ifan/assets/js/4.d12742be.js"><link rel="prefetch" href="/ifan/assets/js/40.e2d55b45.js"><link rel="prefetch" href="/ifan/assets/js/41.f3e9f27b.js"><link rel="prefetch" href="/ifan/assets/js/42.9b3ce7f9.js"><link rel="prefetch" href="/ifan/assets/js/43.98ddf35b.js"><link rel="prefetch" href="/ifan/assets/js/44.15eac3b3.js"><link rel="prefetch" href="/ifan/assets/js/45.f2c75d5f.js"><link rel="prefetch" href="/ifan/assets/js/46.8ae46583.js"><link rel="prefetch" href="/ifan/assets/js/47.b4acaf1f.js"><link rel="prefetch" href="/ifan/assets/js/48.6d6adf74.js"><link rel="prefetch" href="/ifan/assets/js/49.ba295b07.js"><link rel="prefetch" href="/ifan/assets/js/5.216cae74.js"><link rel="prefetch" href="/ifan/assets/js/50.93b74cc2.js"><link rel="prefetch" href="/ifan/assets/js/51.922c4a4a.js"><link rel="prefetch" href="/ifan/assets/js/52.c37fb6fb.js"><link rel="prefetch" href="/ifan/assets/js/53.ab33bb49.js"><link rel="prefetch" href="/ifan/assets/js/54.925cc9f8.js"><link rel="prefetch" href="/ifan/assets/js/55.c277b13f.js"><link rel="prefetch" href="/ifan/assets/js/56.59b279ae.js"><link rel="prefetch" href="/ifan/assets/js/57.0362fe11.js"><link rel="prefetch" href="/ifan/assets/js/58.03f48d64.js"><link rel="prefetch" href="/ifan/assets/js/59.6707bb15.js"><link rel="prefetch" href="/ifan/assets/js/6.2d0a63f8.js"><link rel="prefetch" href="/ifan/assets/js/60.377bacbf.js"><link rel="prefetch" href="/ifan/assets/js/61.38370e88.js"><link rel="prefetch" href="/ifan/assets/js/62.54b27491.js"><link rel="prefetch" href="/ifan/assets/js/63.bf05897b.js"><link rel="prefetch" href="/ifan/assets/js/64.4560bd81.js"><link rel="prefetch" href="/ifan/assets/js/65.24ca0fbc.js"><link rel="prefetch" href="/ifan/assets/js/66.419b11f8.js"><link rel="prefetch" href="/ifan/assets/js/67.14ff65ee.js"><link rel="prefetch" href="/ifan/assets/js/68.1e752754.js"><link rel="prefetch" href="/ifan/assets/js/69.c8348371.js"><link rel="prefetch" href="/ifan/assets/js/7.9b5ec1cb.js"><link rel="prefetch" href="/ifan/assets/js/70.0dba163f.js"><link rel="prefetch" href="/ifan/assets/js/71.6928e311.js"><link rel="prefetch" href="/ifan/assets/js/72.e637b7d0.js"><link rel="prefetch" href="/ifan/assets/js/73.f5c83273.js"><link rel="prefetch" href="/ifan/assets/js/74.15178ce0.js"><link rel="prefetch" href="/ifan/assets/js/75.f1f80645.js"><link rel="prefetch" href="/ifan/assets/js/76.a6c2314d.js"><link rel="prefetch" href="/ifan/assets/js/77.a42621be.js"><link rel="prefetch" href="/ifan/assets/js/78.06f2d516.js"><link rel="prefetch" href="/ifan/assets/js/79.5f1f996e.js"><link rel="prefetch" href="/ifan/assets/js/8.5fa9a4d8.js"><link rel="prefetch" href="/ifan/assets/js/80.66dba44f.js"><link rel="prefetch" href="/ifan/assets/js/81.d725911b.js"><link rel="prefetch" href="/ifan/assets/js/82.7d7062a8.js"><link rel="prefetch" href="/ifan/assets/js/83.a71ad082.js"><link rel="prefetch" href="/ifan/assets/js/84.0d1f2611.js"><link rel="prefetch" href="/ifan/assets/js/85.be611838.js"><link rel="prefetch" href="/ifan/assets/js/86.2bdd958c.js"><link rel="prefetch" href="/ifan/assets/js/87.c31e7630.js"><link rel="prefetch" href="/ifan/assets/js/88.636db1ad.js"><link rel="prefetch" href="/ifan/assets/js/89.c9031d21.js"><link rel="prefetch" href="/ifan/assets/js/9.02ddb301.js"><link rel="prefetch" href="/ifan/assets/js/90.8c41143f.js"><link rel="prefetch" href="/ifan/assets/js/91.33969a76.js"><link rel="prefetch" href="/ifan/assets/js/92.e7009e2a.js"><link rel="prefetch" href="/ifan/assets/js/93.ff9902be.js"><link rel="prefetch" href="/ifan/assets/js/94.a7687ed6.js"><link rel="prefetch" href="/ifan/assets/js/95.360cdf17.js"><link rel="prefetch" href="/ifan/assets/js/97.e9d7cf84.js"><link rel="prefetch" href="/ifan/assets/js/98.417ffc0b.js"><link rel="prefetch" href="/ifan/assets/js/99.9c2eaa5a.js">
    <link rel="stylesheet" href="/ifan/assets/css/0.styles.9066d5db.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ifan/" class="home-link router-link-active"><!----> <span class="site-name">Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ifan/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="what?" class="dropdown-title"><span class="title">what?</span> <span class="arrow down"></span></button> <button type="button" aria-label="what?" class="mobile-dropdown-title"><span class="title">what?</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/IFANx" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/IFANx" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ifan/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="what?" class="dropdown-title"><span class="title">what?</span> <span class="arrow down"></span></button> <button type="button" aria-label="what?" class="mobile-dropdown-title"><span class="title">what?</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/IFANx" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/IFANx" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JVM</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Maven</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>软件测试相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Redis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringBoot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>计算机网络</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ifan/Notes/计算机网络/TCP.html" class="sidebar-link">TCP</a></li><li><a href="/ifan/Notes/计算机网络/UDP.html" class="sidebar-link">UDP</a></li><li><a href="/ifan/Notes/计算机网络/应用层协议.html" class="sidebar-link">应用层协议</a></li><li><a href="/ifan/Notes/计算机网络/HTTP详解.html" class="sidebar-link">HTTP详解</a></li><li><a href="/ifan/Notes/计算机网络/传输层协议.html" class="sidebar-link">传输层协议</a></li><li><a href="/ifan/Notes/计算机网络/RPC.html" class="sidebar-link">RPC</a></li><li><a href="/ifan/Notes/计算机网络/Session和Cookie.html" class="sidebar-link">Session和Cookie</a></li><li><a href="/ifan/Notes/计算机网络/链路层和局域网.html" class="sidebar-link">链路层和局域网</a></li><li><a href="/ifan/Notes/计算机网络/网络层协议-数据平面.html" class="sidebar-link">网络层协议-数据平面</a></li><li><a href="/ifan/Notes/计算机网络/网络层协议-控制平面.html" class="active sidebar-link">网络层协议-控制平面</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ifan/Notes/计算机网络/网络层协议-控制平面.html#路由选择算法" class="sidebar-link">路由选择算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ifan/Notes/计算机网络/网络层协议-控制平面.html#链路状态路由选择算法" class="sidebar-link">链路状态路由选择算法</a></li><li class="sidebar-sub-header"><a href="/ifan/Notes/计算机网络/网络层协议-控制平面.html#距离向量路由选择算法" class="sidebar-link">距离向量路由选择算法</a></li></ul></li><li class="sidebar-sub-header"><a href="/ifan/Notes/计算机网络/网络层协议-控制平面.html#因特网中自治系统内部的路由选择-ospf" class="sidebar-link">因特网中自治系统内部的路由选择:OSPF</a></li><li class="sidebar-sub-header"><a href="/ifan/Notes/计算机网络/网络层协议-控制平面.html#isp之间的路由选择-bgp" class="sidebar-link">ISP之间的路由选择:BGP</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MySQL</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>操作系统</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Netty</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JUC</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Summary</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java IO</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基础和原理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Notes</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="网络层协议-控制平面"><a href="#网络层协议-控制平面" class="header-anchor">#</a> 网络层协议-控制平面</h1> <h2 id="路由选择算法"><a href="#路由选择算法" class="header-anchor">#</a> 路由选择算法</h2> <p>目的是从发送方到接收方的过程中确定一条通过路由器网络的好的路径(等价于路由)</p> <p><strong>集中式路由选择算法</strong></p> <p>用完整的、全局性的网络知识计算岀从源到目的地之间的最低开销路径。也就是说，该算法以所有节点之间的连通性及所有链路的开销为输入。这就要求该算法在真正开始计算以前，要以某种方式获得这些信息。计算本身可在某个场点进行，或在每台路由器的路由选择组件中重复进行。然而，这里的主要区别在于，集中式算法具有关于连通性和链路开销方面的 完整信息。具有全局状态信息的算法常被称作链路状态(Link State, LS) 算法,因为该算法必须知道网络中每条链路的开销。</p> <p><strong>分散式路由选择算法</strong></p> <p>路由器以迭代、分布式的方式计算出最低开销路径。没有节点拥有关于所有网络链路开销的完整信息。 相反，每个节点仅有与其直接相连链路的开销知识即可开始工作。然后，通过迭 代计算过程以及与相邻节点的信息交换，一个节点逐渐计算出到达某目的节点或 一组目的节点的最低开销路径。我们将在后面的5.2.2节学习一个称为距离向量(Distance-Vector, DV)算法的分散式路由选择算法。之所以叫作DV算法，是因为每个节点维护到网络中所有其他节点的开销(距离)估计的向量。这种分散式 算法，通过相邻路由器之间的交互式报文交换，也许更为天然地适合那些路由器直接交互的控制平面</p> <p>路由选择算法的第二种广义分类方式是根据算法是静态的还是动态的进行分类。在<strong>静态路由选择算法</strong>(static routing algorithm)中，路由随时间的变化非常缓慢，通常是人丁-进 行调整(如人为手工编辑一条链路开销)。<strong>动态路由选择算法</strong>(dynamic routing algorithm) 随着网络流量负载或拓扑发生变化而改变路由选择路径。一个动态算法可周期性地运行或 直接响应拓扑或链路开销的变化而运行。虽然动态算法易于对网络的变化做岀反应，但也更容易受诸如路由选择循环、路由振荡之类问题的影响。</p> <h3 id="链路状态路由选择算法"><a href="#链路状态路由选择算法" class="header-anchor">#</a> 链路状态路由选择算法</h3> <p>链路状态算法中，网络拓扑和所有的链路开销都是已知的，也就是说可 用作LS算法的输入。</p> <p>实践中这是通过让每个节点向网络中所有其他节点广播链路状态分组来完成的，其中每个链路状态分组包含它所连接的链路的标识和开销，节点广播的结果是所有节点都具有该网络的统一、完整的视图。于是每个节点都能够像其他节点一样，运行LS算法并计算出相同的最 低开销路径集合。</p> <p>Dijkstra算法或Prim算法</p> <h3 id="距离向量路由选择算法"><a href="#距离向量路由选择算法" class="header-anchor">#</a> 距离向量路由选择算法</h3> <p>距离向量(Distance-Vector, DV)算法是一种迭代的、异步的和分布式的算法，而LS 算法是一种使用全局信息的算法。说它是分布式的，是因为每个节点都要从一个或多个直 接相连邻居接收某些信息，执行计算，然后将其计算结果分发给邻居。说它是迭代的，是因为此过程一直要持续到邻居之间无更多信息要交换为止。</p> <p>LS算法是一种全局算法，在于它要求每个节点在运行Dijkstra算法之前，首 先获得该网络的完整信息。DV算法是分布式的，它不使用这样的全局信息。实际上，节点具有的唯一信息是它到直接相连邻居的链路开销和它从这些邻居接收到的信息。每个节点等待来自任何邻居的更新(第10〜11行)，当接收到一个更新时计算它的新距离向量 (第14行)并向它的邻居分布其新距离向量(第16-17行)</p> <h2 id="因特网中自治系统内部的路由选择-ospf"><a href="#因特网中自治系统内部的路由选择-ospf" class="header-anchor">#</a> 因特网中自治系统内部的路由选择:OSPF</h2> <p>管理自治-因特网是ISP的网络，其中每个ISP都有它自己的路由器网络。ISP通常希望按自己的意愿运行路由器(如在自己的网络中运行 它所选择的某种路由选择算法)，或对外部隐藏其网络的内部组织面貌。在理想情况下，一个组织应当能够按自己的愿望运行和管理其网络，还要能将其网络与其他外部网络连接起来。</p> <p>AS自治系统：路由器组织进自治系统(Autonomous System, AS) 来解决，其中每个AS由一组通常处在相同管理控制下的路由器组成</p> <p><strong>OSPF;开放最短路径优先协议</strong></p> <p>OSPF路由选择及其关系密切的协议IS-IS都被广泛用于因特网的AS内部路由选择。</p> <p><strong>OSPF是一种链路状态协议</strong>，它使用洪泛链路状态信息和Dijkstra最低开销路径算法。 使用OSPF, —台路由器构建了一幅关于整个自治系统的完整拓扑图(即一幅图)。于是, 每台路由器在本地运行Dijkstra的最短路径算法，以确定一个以自身为根节点到所有子网的最短路径树。各条链路开销是由网络管理员配置的(参见“实践原则:设置OSPF链路 权值”)。管理员也许会选择将所有链路开销设为1,因而实现了最少跳数路由选择，或者可能会选择将链路权值按与链路容量成反比来设置，从而不鼓励流量使用低带宽链路。OSPF不强制使用设置链路权值的策略(那是网络管理员的任务)，而是提供了一种机制 (协议)，为给定链路权值集合确定最低开销路径的路由选择。</p> <p>使用OSPF时，路由器向自治系统内所有其他路由器广播路由选择信息，而不仅仅是 向其相邻路由器广播。每当一条链路的状态发生变化时(如开销的变化或连接/中断状态 的变化)，路由器就会广播链路状态信息。即使链路状态未发生变化，它也要周期性地 (至少每隔30 min - 次)广播链路状态。</p> <h2 id="isp之间的路由选择-bgp"><a href="#isp之间的路由选择-bgp" class="header-anchor">#</a> ISP之间的路由选择:BGP</h2> <p>OSPF是一个AS内部路由选择协议。当在相同AS内的源和目的地之 间进行分组选路时，分组遵循的路径完全由AS内路由选择协议所决定。然而，当分组跨 越多个AS进行路由时，比如说从位于马里廷巴克图的智能手机到位于美国硅谷数据中心的一台服务器，我们需要一个自治系统间路由选择协议(inter-autonomous system routing protocol)o因为AS间路由选择协议涉及多个AS之间的协调，所以AS通信必须运行相同的AS间路由选择协议。在因特网中，所有的AS运行相同的AS间路由选择协议，称为<strong>边界网关协议(Broder Gateway Protocol, BGP)</strong></p> <p>在BGP中，分组并不是路由到一个特定的目的地址，相反是路由到CIDR化的前缀, 其中每个前缀表示一个子网或一个子网的集合。在 BGP的世界中，一个目的地可以采用 13&amp; 16. 68/22的形式，对于这个例子来说包括1024个IP地址。因此，一台路由器的转发表将具有形式为 仏，7)的表项，其中兀是一个前缀(例如13&amp; 16. 68/22), /是该路由 器的接口之一的接口号。</p> <p><strong>通告BGP路由信息</strong></p> <p>对于每个AS,每台路由器要么是一台<strong>网关路由器(gateway router),</strong> 要么是一台<strong>内部路由器(internal router)</strong> 。网关路由器是一台位于AS边缘的路由器，它直接连接到在其他AS中的一台或多台路由器。内部路由器仅连接在它自己AS中的主机和路由器。</p> <p><img src="http://8.130.25.175:8080/img/image-20230526210657629.png" alt="image-20230526210657629"></p> <p>在 BGP中，每对路由器通过使用179端口的半永久 TCP连接交换路由选择信息。每条直接连接以及所有通过该连接发送的BGP报文，称为BGP连接(BGP cormection)。此外，跨越两个AS的BGP连接称为外部BGP ( eBGP)连 接，而在相同AS中的两台路由器之间的BGP会话称为内部BGP (iBGP)连接。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ifan/Notes/计算机网络/网络层协议-数据平面.html" class="prev">
        网络层协议-数据平面
      </a></span> <span class="next"><a href="/ifan/Notes/Docker/docker部署ftp文件服务器.html">
        docker部署ftp文件服务器
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/ifan/assets/js/app.8404088c.js" defer></script><script src="/ifan/assets/js/2.733019b2.js" defer></script><script src="/ifan/assets/js/96.6311231f.js" defer></script>
  </body>
</html>
