{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{315:function(t,v,_){\"use strict\";_.r(v);var r=_(14),s=Object(r.a)({},(function(){var t=this,v=t._self._c;return v(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[v(\"h1\",{attrs:{id:\"springboot集成文件-大文件的上传-异步-分片-断点续传和秒传\"}},[v(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#springboot集成文件-大文件的上传-异步-分片-断点续传和秒传\"}},[t._v(\"#\")]),t._v(\" SpringBoot集成文件 - 大文件的上传(异步，分片，断点续传和秒传)\")]),t._v(\" \"),v(\"blockquote\",[v(\"p\",[t._v(\"上文中介绍的是常规文件的上传和下载，而超大文件的上传技术手段和普通文件上传是有差异的，主要通过基于分片的断点续传和秒传和异步上传等技术手段解决。本文主要介绍SpringBoot集成大文件上传的案例。\")])]),t._v(\" \"),v(\"hr\"),t._v(\" \"),v(\"h2\",{attrs:{id:\"知识准备\"}},[v(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#知识准备\"}},[t._v(\"#\")]),t._v(\" 知识准备\")]),t._v(\" \"),v(\"blockquote\",[v(\"p\",[t._v(\"大文件的上传技术手段和普通文件上传是有差异的，主要通过基于分片的断点续传和秒传和异步上传解决。@pdai\")])]),t._v(\" \"),v(\"h3\",{attrs:{id:\"基于分片的断点续传和秒传\"}},[v(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#基于分片的断点续传和秒传\"}},[t._v(\"#\")]),t._v(\" \"),v(\"a\",{attrs:{href:\"#%E5%9F%BA%E4%BA%8E%E5%88%86%E7%89%87%E7%9A%84%E6%96%AD%E7%82%B9%E7%BB%AD%E4%BC%A0%E5%92%8C%E7%A7%92%E4%BC%A0\"}},[t._v(\"#\")]),t._v(\" 基于分片的断点续传和秒传\")]),t._v(\" \"),v(\"blockquote\",[v(\"p\",[t._v(\"当我们上传的文件很大时，对大文件的处理通常通过\"),v(\"strong\",[t._v(\"分片上传\")]),t._v(\"、\"),v(\"strong\",[t._v(\"断点续传\")]),t._v(\"和\"),v(\"strong\",[t._v(\"秒传\")]),t._v(\"技术手段实现。\")])]),t._v(\" \"),v(\"ul\",[v(\"li\",[v(\"strong\",[t._v(\"分片上传\")])])]),t._v(\" \"),v(\"p\",[t._v(\"分片上传就是将一个大文件分成若干份大小相等的小块文件，等所有小块文件上传成功后，再将文件进行合并成完整的原始文件。\")]),t._v(\" \"),v(\"ul\",[v(\"li\",[v(\"strong\",[t._v(\"断点续传\")])])]),t._v(\" \"),v(\"p\",[t._v(\"断点续传就是重新上传文件时先判断哪些文件块已经上传过了（比如将分片的chuck md5等信息保存在DB中)，如果上传过了则跳过这些块，否则上传没有上传的块。\")]),t._v(\" \"),v(\"ul\",[v(\"li\",[v(\"strong\",[t._v(\"秒传\")])])]),t._v(\" \"),v(\"p\",[t._v(\"当用户选择上传一个文件时，服务端检测该文件之前是否已经被上传过，如果服务器已经存有该文件（完全一样），就立马返回前端 “文件已上传成功”。前端随即将进度条更新至100%。 这样给用户的感觉就是 “秒传” 的感觉。\")]),t._v(\" \"),v(\"p\",[t._v(\"对于分片上传，\"),v(\"strong\",[t._v(\"前后端分别需要怎么做呢\")]),t._v(\"？\")]),t._v(\" \"),v(\"ol\",[v(\"li\",[v(\"strong\",[t._v(\"前端\")]),t._v(\"：需要将文件file.slice()成多个文件块，并计算每一块的md5值，每次请求上传都是传一个小文件块。\")]),t._v(\" \"),v(\"li\",[v(\"strong\",[t._v(\"后端\")]),t._v(\"：需要接收每次上传的文件块并保存文件块的信息（比如md5), 如果已经上传则跳过；最后等所有文件上传完成之后，将所有的文件块合并成一个大文件。\")])]),t._v(\" \"),v(\"h3\",{attrs:{id:\"异步上传\"}},[v(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#异步上传\"}},[t._v(\"#\")]),t._v(\" \"),v(\"a\",{attrs:{href:\"#%E5%BC%82%E6%AD%A5%E4%B8%8A%E4%BC%A0\"}},[t._v(\"#\")]),t._v(\" 异步上传\")]),t._v(\" \"),v(\"blockquote\",[v(\"p\",[t._v(\"当我们上传的文件很大，后台需要处理的时间很长，用户期望切换到其它页面继续工作，而不需要等待完成。这时候我们可以采用异步上传的方式。\")])]),t._v(\" \"),v(\"p\",[t._v(\"在SpringBoot中将一个方法声明为异步方法非常简单，只需两个注解即可\"),v(\"code\",[t._v(\"@EnableAsync\")]),t._v(\"和\"),v(\"code\",[t._v(\"@Async\")]),t._v(\"。\")]),t._v(\" \"),v(\"hr\")])}),[],!1,null,null,null);v.default=s.exports}}]);","extractedComments":[]}