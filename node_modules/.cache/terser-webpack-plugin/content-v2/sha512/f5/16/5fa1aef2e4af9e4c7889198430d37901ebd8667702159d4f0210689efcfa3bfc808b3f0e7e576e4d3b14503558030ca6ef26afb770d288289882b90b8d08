{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{282:function(t,n,e){\"use strict\";e.r(n);var p=e(14),s=Object(p.a)({},(function(){var t=this,n=t._self._c;return n(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[n(\"h1\",{attrs:{id:\"docker创建ftp服务器\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker创建ftp服务器\"}},[t._v(\"#\")]),t._v(\" Docker创建FTP服务器\")]),t._v(\" \"),n(\"p\",[t._v(\"现在账户密码均为root，挂在目录为/opt/vsftpd/file\")]),t._v(\" \"),n(\"p\",[t._v(\"https://blog.csdn.net/qq_25955145/article/details/123923695\")]),t._v(\" \"),n(\"p\",[t._v(\"Docker创建FTP服务器\\n一.创建命令如下\\ndocker run -d -p  21:21 -p  20:20 -p 21100-21110:21100-21110 -v /opt/vsftpd/file:/home/vsftpd -e FTP_USER=root -e FTP_PASS=root   -e PASV_MIN_PORT=21100 -e PASV_MAX_PORT=21110 -e PASV_ADDRESS=8.130.25.175 -e PASV_ENABLE=YES --name ftp -- --privileged=true fauria/vsftpd\\n1\\n二.命令含义\\n参数\\t含义\\n-d\\t后台启动容器\\n-p 20:20\\t将外部的20端口映射到内部的20端口\\n-p 21:21\\t将外部的21端口映射到内部的21端口\\n-p 21100-21110:21100-21110\\t将外部的 21100-21110端口映射到内部的21100-21110端口\\n-v /opt/vsftpd/file:/home/vsftpd\\t将本地磁盘的 /opt/vsftpd/file路径映射到内部的/home/vsftpd路径\\n-e FTP_USER=admin\\tftp的主用户\\n-e FTP_PASS=1234\\tftp主用户的密码\\n-e PASV_MIN_PORT=21100\\t最小被动端口\\n-e PASV_MAX_PORT=21110\\t最大被动端口\\n-e PASV_ADDRESS=10.73.139.201\\t指定本机的ip\\n-e PASV_ENABLE=YES\\t启动被动模式\\n–name ftp\\t取一个名字，之后可以用(docker stop 名字 )来停止容器\\n–restart=always\\t开机自启动\\n–privileged=true\\t容器内用户获取root权限\\nfauria/vsftpd\\t仓库的镜像\\n三.客户端连接\\n1.客户端可以直接安装filezilla进行连接\\n如果你的客户端连接不上，你需要用telnet命令来看下\")]),t._v(\" \"),n(\"p\",[t._v(\"telnet  10.73.139.201 21\\n1\\n如果报错，那可能是防火墙没有打通\")]),t._v(\" \"),n(\"p\",[t._v(\"2.如果是mac用户，也可以用终端的ftp命令进行连接\\nftp 10.73.139.201\\n1\\n输入账号admin，密码1234\")]),t._v(\" \"),n(\"p\",[t._v(\"然后ls命令，如果报错\")]),t._v(\" \"),n(\"p\",[t._v(\"500 Illegal PORT command.\\n500 Unknown command.\\n425 Use PORT or PASV first.\\n1\\n2\\n3\\n可以在ftp下执行以下命令\")]),t._v(\" \"),n(\"p\",[t._v(\"pass\\n1\\n输出\")]),t._v(\" \"),n(\"p\",[t._v(\"Passive mode on\\n1\\n这个时候，就可以正常的ls了\")]),t._v(\" \"),n(\"p\",[t._v(\"四.创建新用户\\n1.尝试进入容器内部进行交互\\ndocker exec -i -t ftp bash\\n1\\n参数\\t含义\\n-i\\t连接容器的STDIN和容器外的STDIN\\n-t\\t告诉 docker 内部的主进程它的输入是终端设备\\nftp\\t指定要进入的容器的名字（这个是在创建的时候使用–name指定的）\\nbash\\t使用bash作为终端\\n2.给新的用户创建文件夹\\n新用户：张三\\n文件夹：zhangsan\\nmkdir /home/vsftpd/zhangsan\\n1\\n注意：该命令在容器内执行\")]),t._v(\" \"),n(\"p\",[t._v('3.将账号密码信息写入文件\\necho -e \"zhangsan\\\\n123456\" >> /etc/vsftpd/virtual_users.txt\\n1\\n注意：该命令在容器内执行')]),t._v(\" \"),n(\"p\",[t._v(\"4.使用脚本读取刚刚写入的文件\\n/usr/bin/db_load -T -t hash -f /etc/vsftpd/virtual_users.txt /etc/vsftpd/virtual_users.db\\n1\\n注意：该命令在容器内执行\")]),t._v(\" \"),n(\"p\",[t._v(\"5.退出容器\\nexit\\n1\\n注意：该命令在容器内执行\")]),t._v(\" \"),n(\"p\",[t._v(\"6.重启ftp\\ndocker restart ftp\\n1\\n此时，下面的账号密码就可以登录ftp\")]),t._v(\" \"),n(\"p\",[t._v(\"属性\\t值\\n账号\\tzhangsan\\n密码\\t123456\\n————————————————\")])])}),[],!1,null,null,null);n.default=s.exports}}]);","extractedComments":[]}