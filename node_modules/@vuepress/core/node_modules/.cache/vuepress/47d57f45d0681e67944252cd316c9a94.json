{"remainingRequest":"/Users/kkxu/NodeProjects/ifan/ifan/node_modules/cache-loader/dist/cjs.js??ref--3-0!/Users/kkxu/NodeProjects/ifan/ifan/node_modules/babel-loader/lib/index.js??ref--3-1!/Users/kkxu/NodeProjects/ifan/ifan/node_modules/vue-loader/lib/loaders/templateLoader.js??ref--6!/Users/kkxu/NodeProjects/ifan/ifan/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/kkxu/NodeProjects/ifan/ifan/node_modules/vue-loader/lib/index.js??ref--1-1!/Users/kkxu/NodeProjects/ifan/ifan/node_modules/@vuepress/markdown-loader/index.js??ref--1-2!/Users/kkxu/NodeProjects/ifan/ifan/resource/Notes/JVM/JUC/AQS详解.md?vue&type=template&id=08737062&","dependencies":[{"path":"/Users/kkxu/NodeProjects/ifan/ifan/resource/Notes/JVM/JUC/AQS详解.md","mtime":1685789952980},{"path":"/Users/kkxu/NodeProjects/ifan/ifan/node_modules/cache-loader/dist/cjs.js","mtime":1682315774467},{"path":"/Users/kkxu/NodeProjects/ifan/ifan/node_modules/cache-loader/dist/cjs.js","mtime":1682315774467},{"path":"/Users/kkxu/NodeProjects/ifan/ifan/node_modules/babel-loader/lib/index.js","mtime":1682315774434},{"path":"/Users/kkxu/NodeProjects/ifan/ifan/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":1682315775411},{"path":"/Users/kkxu/NodeProjects/ifan/ifan/node_modules/cache-loader/dist/cjs.js","mtime":1682315774467},{"path":"/Users/kkxu/NodeProjects/ifan/ifan/node_modules/vue-loader/lib/index.js","mtime":1682315775411},{"path":"/Users/kkxu/NodeProjects/ifan/ifan/node_modules/@vuepress/markdown-loader/index.js","mtime":1682315774367}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIHJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHsKICB2YXIgX3ZtID0gdGhpcywKICAgIF9jID0gX3ZtLl9zZWxmLl9jOwogIHJldHVybiBfYygnQ29udGVudFNsb3RzRGlzdHJpYnV0b3InLCB7CiAgICBhdHRyczogewogICAgICAic2xvdC1rZXkiOiBfdm0uJHBhcmVudC5zbG90S2V5CiAgICB9CiAgfSwgW19jKCdoMScsIHsKICAgIGF0dHJzOiB7CiAgICAgICJpZCI6ICJhcXMiCiAgICB9CiAgfSwgW19jKCdhJywgewogICAgc3RhdGljQ2xhc3M6ICJoZWFkZXItYW5jaG9yIiwKICAgIGF0dHJzOiB7CiAgICAgICJocmVmIjogIiNhcXMiCiAgICB9CiAgfSwgW192bS5fdigiIyIpXSksIF92bS5fdigiIEFRUyIpXSksIF92bS5fdigiICIpLCBfYygncCcsIFtfdm0uX3YoImh0dHBzOi8vcGRhaS50ZWNoL21kL2phdmEvdGhyZWFkL2phdmEtdGhyZWFkLXgtbG9jay1BYnN0cmFjdFF1ZXVlZFN5bmNocm9uaXplci5odG1sIildKSwgX3ZtLl92KCIgIiksIF9jKCdwJywgW192bS5fdigiQWJzdHJhY3RRdWV1ZWRTeW5jaHJvbml6ZXLmir3osaHnsbvmmK/moLjlv4PvvIzpnIDopoHph43ngrnmjozmj6HjgILlroPmj5DkvpvkuobkuIDkuKrln7rkuo5GSUZP6Zif5YiX77yM5Y+v5Lul55So5LqO5p6E5bu66ZSB5oiW6ICF5YW25LuW55u45YWz5ZCM5q2l6KOF572u55qE5Z+656GA5qGG5p6244CCIildKSwgX3ZtLl92KCIgIiksIF9jKCdwJywgW192bS5fdigiQVFT5piv5LiA5Liq55So5p2l5p6E5bu66ZSB5ZKM5ZCM5q2l5Zmo55qE5qGG5p6277yM5L2/55SoQVFT6IO9566A5Y2V5LiU6auY5pWI5Zyw5p6E6YCg5Ye65bqU55So5bm/5rOb55qE5aSn6YeP55qE5ZCM5q2l5Zmo77yM5q+U5aaC5oiR5Lus5o+Q5Yiw55qEUmVlbnRyYW50TG9ja++8jFNlbWFwaG9yZe+8jOWFtuS7lueahOivuOWmglJlZW50cmFudFJlYWRXcml0ZUxvY2vvvIxTeW5jaHJvbm91c1F1ZXVl77yMRnV0dXJlVGFza+etieetieeahuaYr+WfuuS6jkFRU+eahOOAguW9k+eEtu+8jOaIkeS7rOiHquW3seS5n+iDveWIqeeUqEFRU+mdnuW4uOi9u+advuWuueaYk+WcsOaehOmAoOWHuuespuWQiOaIkeS7rOiHquW3semcgOaxgueahOWQjOatpeWZqOOAgiIpXSksIF92bS5fdigiICIpLCBfYygnaDMnLCB7CiAgICBhdHRyczogewogICAgICAiaWQiOiAiYXFzLeaguOW/g+aAneaDsyIKICAgIH0KICB9LCBbX2MoJ2EnLCB7CiAgICBzdGF0aWNDbGFzczogImhlYWRlci1hbmNob3IiLAogICAgYXR0cnM6IHsKICAgICAgImhyZWYiOiAiI2Fxcy3moLjlv4PmgJ3mg7MiCiAgICB9CiAgfSwgW192bS5fdigiIyIpXSksIF92bS5fdigiIEFRUyDmoLjlv4PmgJ3mg7MiKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3AnLCBbX3ZtLl92KCJBUVPmoLjlv4PmgJ3mg7PmmK/vvIzlpoLmnpzooqvor7fmsYLnmoTlhbHkuqvotYTmupDnqbrpl7LvvIzliJnlsIblvZPliY3or7fmsYLotYTmupDnmoTnur/nqIvorr7nva7kuLrmnInmlYjnmoTlt6XkvZznur/nqIvvvIzlubbkuJTlsIblhbHkuqvotYTmupDorr7nva7kuLrplIHlrprnirbmgIHjgILlpoLmnpzooqvor7fmsYLnmoTlhbHkuqvotYTmupDooqvljaDnlKjvvIzpgqPkuYjlsLHpnIDopoHkuIDlpZfnur/nqIvpmLvloZ7nrYnlvoXku6Xlj4rooqvllKTphpLml7bplIHliIbphY3nmoTmnLrliLbvvIzov5nkuKrmnLrliLZBUVPmmK/nlKhDTEjpmJ/liJfplIHlrp7njrDnmoTvvIzljbPlsIbmmoLml7bojrflj5bkuI3liLDplIHnmoTnur/nqIvliqDlhaXliLDpmJ/liJfkuK3jgIIiKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ2Jsb2NrcXVvdGUnLCBbX2MoJ3AnLCBbX3ZtLl92KCJDTEgoQ3JhaWcsTGFuZGluLGFuZCBIYWdlcnN0ZW4p6Zif5YiX5piv5LiA5Liq6Jma5ouf55qE5Y+M5ZCR6Zif5YiXKOiZmuaLn+eahOWPjOWQkemYn+WIl+WNs+S4jeWtmOWcqOmYn+WIl+WunuS+i++8jOS7heWtmOWcqOe7k+eCueS5i+mXtOeahOWFs+iBlOWFs+ezuynjgIJBUVPmmK/lsIbmr4/mnaHor7fmsYLlhbHkuqvotYTmupDnmoTnur/nqIvlsIHoo4XmiJDkuIDkuKpDTEjplIHpmJ/liJfnmoTkuIDkuKrnu5PngrkoTm9kZSnmnaXlrp7njrDplIHnmoTliIbphY3jgIIiKV0pXSksIF92bS5fdigiICIpLCBfYygncCcsIFtfdm0uX3YoIkFRU+S9v+eUqOS4gOS4qmludOaIkOWRmOWPmOmHj+adpeihqOekuuWQjOatpeeKtuaAge+8jOmAmui/h+WGhee9rueahEZJRk/pmJ/liJfmnaXlrozmiJDojrflj5botYTmupDnur/nqIvnmoTmjpLpmJ/lt6XkvZzjgIJBUVPkvb/nlKhDQVPlr7nor6XlkIzmraXnirbmgIHov5vooYzljp/lrZDmk43kvZzlrp7njrDlr7nlhbblgLznmoTkv67mlLnjgIIiKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ2hyJyksIF92bS5fdigiICIpLCBfYygnaDMnLCB7CiAgICBhdHRyczogewogICAgICAiaWQiOiAiYXFzLeWvuei1hOa6kOeahOWFseS6q+aWueW8jyIKICAgIH0KICB9LCBbX2MoJ2EnLCB7CiAgICBzdGF0aWNDbGFzczogImhlYWRlci1hbmNob3IiLAogICAgYXR0cnM6IHsKICAgICAgImhyZWYiOiAiI2Fxcy3lr7notYTmupDnmoTlhbHkuqvmlrnlvI8iCiAgICB9CiAgfSwgW192bS5fdigiIyIpXSksIF92bS5fdigiIEFRUyDlr7notYTmupDnmoTlhbHkuqvmlrnlvI8iKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3AnLCBbX3ZtLl92KCJBUVPlrprkuYnkuKTnp43otYTmupDlhbHkuqvmlrnlvI8iKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3VsJywgW19jKCdsaScsIFtfdm0uX3YoIkV4Y2x1c2l2ZSjni6zljaAp77ya5Y+q5pyJ5LiA5Liq57q/56iL6IO95omn6KGM77yM5aaCUmVlbnRyYW50TG9ja+OAguWPiOWPr+WIhuS4uuWFrOW5s+mUgeWSjOmdnuWFrOW5s+mUge+8mlxuIiksIF9jKCd1bCcsIFtfYygnbGknLCBbX3ZtLl92KCLlhazlubPplIHvvJrmjInnhafnur/nqIvlnKjpmJ/liJfkuK3nmoTmjpLpmJ/pobrluo/vvIzlhYjliLDogIXlhYjmi7/liLDplIEiKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ2xpJywgW192bS5fdigi6Z2e5YWs5bmz6ZSB77ya5b2T57q/56iL6KaB6I635Y+W6ZSB5pe277yM5peg6KeG6Zif5YiX6aG65bqP55u05o6l5Y675oqi6ZSB77yM6LCB5oqi5Yiw5bCx5piv6LCB55qEIildKV0pXSksIF92bS5fdigiICIpLCBfYygnbGknLCBbX3ZtLl92KCJTaGFyZSjlhbHkuqsp77ya5aSa5Liq57q/56iL5Y+v5ZCM5pe25omn6KGM77yM5aaCU2VtYXBob3JlL0NvdW50RG93bkxhdGNo44CCU2VtYXBob3Jl44CBQ291bnREb3duTGF0Q2jjgIEgQ3ljbGljQmFycmllcuOAgVJlYWRXcml0ZUxvY2sg5oiR5Lus6YO95Lya5Zyo5ZCO6Z2i6K6y5Yiw44CCIildKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3AnLCBbX3ZtLl92KCJSZWVudHJhbnRSZWFkV3JpdGVMb2NrIOWPr+S7peeci+aIkOaYr+e7hOWQiOW8j++8jOWboOS4ulJlZW50cmFudFJlYWRXcml0ZUxvY2vkuZ/lsLHmmK/or7vlhpnplIHlhYHorrjlpJrkuKrnur/nqIvlkIzml7blr7nmn5DkuIDotYTmupDov5vooYzor7vjgIIiKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3AnLCBbX3ZtLl92KCLkuI3lkIznmoToh6rlrprkuYnlkIzmraXlmajkuonnlKjlhbHkuqvotYTmupDnmoTmlrnlvI/kuZ/kuI3lkIzjgILoh6rlrprkuYnlkIzmraXlmajlnKjlrp7njrDml7blj6rpnIDopoHlrp7njrDlhbHkuqvotYTmupAgc3RhdGUg55qE6I635Y+W5LiO6YeK5pS+5pa55byP5Y2z5Y+v77yM6Iez5LqO5YW35L2T57q/56iL562J5b6F6Zif5YiX55qE57u05oqkKOWmguiOt+WPlui1hOa6kOWksei0peWFpemYny/llKTphpLlh7rpmJ/nrYkp77yMQVFT5bey57uP5Zyo5LiK5bGC5bey57uP5biu5oiR5Lus5a6e546w5aW95LqG44CCIildKV0pOwp9Owp2YXIgc3RhdGljUmVuZGVyRm5zID0gW107CmV4cG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH07"},{"version":3,"names":["render","_vm","_c","_self","attrs","$parent","slotKey","staticClass","_v","staticRenderFns"],"sources":["/Users/kkxu/NodeProjects/ifan/ifan/resource/Notes/JVM/JUC/AQS详解.md"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ContentSlotsDistributor',{attrs:{\"slot-key\":_vm.$parent.slotKey}},[_c('h1',{attrs:{\"id\":\"aqs\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#aqs\"}},[_vm._v(\"#\")]),_vm._v(\" AQS\")]),_vm._v(\" \"),_c('p',[_vm._v(\"https://pdai.tech/md/java/thread/java-thread-x-lock-AbstractQueuedSynchronizer.html\")]),_vm._v(\" \"),_c('p',[_vm._v(\"AbstractQueuedSynchronizer抽象类是核心，需要重点掌握。它提供了一个基于FIFO队列，可以用于构建锁或者其他相关同步装置的基础框架。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"AQS是一个用来构建锁和同步器的框架，使用AQS能简单且高效地构造出应用广泛的大量的同步器，比如我们提到的ReentrantLock，Semaphore，其他的诸如ReentrantReadWriteLock，SynchronousQueue，FutureTask等等皆是基于AQS的。当然，我们自己也能利用AQS非常轻松容易地构造出符合我们自己需求的同步器。\")]),_vm._v(\" \"),_c('h3',{attrs:{\"id\":\"aqs-核心思想\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#aqs-核心思想\"}},[_vm._v(\"#\")]),_vm._v(\" AQS 核心思想\")]),_vm._v(\" \"),_c('p',[_vm._v(\"AQS核心思想是，如果被请求的共享资源空闲，则将当前请求资源的线程设置为有效的工作线程，并且将共享资源设置为锁定状态。如果被请求的共享资源被占用，那么就需要一套线程阻塞等待以及被唤醒时锁分配的机制，这个机制AQS是用CLH队列锁实现的，即将暂时获取不到锁的线程加入到队列中。\")]),_vm._v(\" \"),_c('blockquote',[_c('p',[_vm._v(\"CLH(Craig,Landin,and Hagersten)队列是一个虚拟的双向队列(虚拟的双向队列即不存在队列实例，仅存在结点之间的关联关系)。AQS是将每条请求共享资源的线程封装成一个CLH锁队列的一个结点(Node)来实现锁的分配。\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"AQS使用一个int成员变量来表示同步状态，通过内置的FIFO队列来完成获取资源线程的排队工作。AQS使用CAS对该同步状态进行原子操作实现对其值的修改。\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('h3',{attrs:{\"id\":\"aqs-对资源的共享方式\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#aqs-对资源的共享方式\"}},[_vm._v(\"#\")]),_vm._v(\" AQS 对资源的共享方式\")]),_vm._v(\" \"),_c('p',[_vm._v(\"AQS定义两种资源共享方式\")]),_vm._v(\" \"),_c('ul',[_c('li',[_vm._v(\"Exclusive(独占)：只有一个线程能执行，如ReentrantLock。又可分为公平锁和非公平锁：\\n\"),_c('ul',[_c('li',[_vm._v(\"公平锁：按照线程在队列中的排队顺序，先到者先拿到锁\")]),_vm._v(\" \"),_c('li',[_vm._v(\"非公平锁：当线程要获取锁时，无视队列顺序直接去抢锁，谁抢到就是谁的\")])])]),_vm._v(\" \"),_c('li',[_vm._v(\"Share(共享)：多个线程可同时执行，如Semaphore/CountDownLatch。Semaphore、CountDownLatCh、 CyclicBarrier、ReadWriteLock 我们都会在后面讲到。\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"ReentrantReadWriteLock 可以看成是组合式，因为ReentrantReadWriteLock也就是读写锁允许多个线程同时对某一资源进行读。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"不同的自定义同步器争用共享资源的方式也不同。自定义同步器在实现时只需要实现共享资源 state 的获取与释放方式即可，至于具体线程等待队列的维护(如获取资源失败入队/唤醒出队等)，AQS已经在上层已经帮我们实现好了。\")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"mappings":"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"}]}